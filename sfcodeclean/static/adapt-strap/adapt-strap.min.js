/**
 * adapt-strap
 * @version v2.6.1 - 2016-08-09
 * @link https://github.com/Adaptv/adapt-strap
 * @author Kashyap Patel (kashyap@adap.tv)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(e,a,t){"use strict";angular.module("adaptv.adaptStrap",["adaptv.adaptStrap.utils","adaptv.adaptStrap.treebrowser","adaptv.adaptStrap.tablelite","adaptv.adaptStrap.tableajax","adaptv.adaptStrap.loadingindicator","adaptv.adaptStrap.draggable","adaptv.adaptStrap.infinitedropdown","adaptv.adaptStrap.alerts"]).provider("$adConfig",function(){var e=this.iconClasses={expand:"glyphicon glyphicon-plus-sign",collapse:"glyphicon glyphicon-minus-sign",loadingSpinner:"glyphicon glyphicon-refresh ad-spin",firstPage:"glyphicon glyphicon-fast-backward",previousPage:"glyphicon glyphicon-backward",nextPage:"glyphicon glyphicon-forward",lastPage:"glyphicon glyphicon-fast-forward",sortAscending:"glyphicon glyphicon-chevron-up",sortDescending:"glyphicon glyphicon-chevron-down",sortable:"glyphicon glyphicon-resize-vertical",draggable:"glyphicon glyphicon-align-justify",selectedItem:"glyphicon glyphicon-ok",alertInfoSign:"glyphicon glyphicon-info-sign",alertSuccessSign:"glyphicon glyphicon-ok",alertWarningSign:"glyphicon glyphicon-warning-sign",alertDangerSign:"glyphicon glyphicon-exclamation-sign"},a=this.paging={request:{start:"skip",pageSize:"limit",page:"page",sortField:"sort",sortDirection:"sort_dir",sortAscValue:"asc",sortDescValue:"desc"},response:{itemsLocation:"data",totalItems:"pagination.totalCount"},pageSize:10,pageSizes:[10,25,50]},t=this.componentClasses={tableLiteClass:"table",tableAjaxClass:"table"};this.$get=function(){return{iconClasses:e,paging:a,componentClasses:t}}}),angular.module("adaptv.adaptStrap.alerts",[]).directive("adAlerts",[function(){function e(e,a,t,n){e.iconMap={info:t.iconClasses.alertInfoSign,success:t.iconClasses.alertSuccessSign,warning:t.iconClasses.alertWarningSign,danger:t.iconClasses.alertDangerSign};var o,i=e.timeout&&!Number(i).isNAN?e.timeout:0;e.close=function(){n.clear(),o&&clearTimeout(o)},e.customClasses=e.customClasses||"",e.settings=n.settings,0!==i&&e.$watch("settings.type",function(a){""!==a&&(o&&clearTimeout(o),o=setTimeout(e.close,i))})}return{restrict:"AE",scope:{timeout:"=",customClasses:"@"},templateUrl:"alerts/alerts.tpl.html",controller:["$scope","$attrs","$adConfig","adAlerts",e]}}]),angular.module("adaptv.adaptStrap.alerts").factory("adAlerts",[function(){function e(e,a,t){l.type=e,l.caption=a,l.message=t}function a(a,t){e("warning",a,t)}function t(a,t){e("info",a,t)}function n(a,t){e("success",a,t)}function o(a,t){e("danger",a,t)}function i(){l.type="",l.caption="",l.message=""}var l={type:"",caption:"",message:""};return{settings:l,warning:a,info:t,success:n,error:o,clear:i}}]),angular.module("adaptv.adaptStrap.draggable",[]).directive("adDrag",["$rootScope","$parse","$timeout",function(t,n,o){function i(i,l,r){function s(){var e=i.useClonedElement?M:l;e.css({left:"",top:"",position:"","z-index":""});var a=e.data("ad-draggable-temp-width");a?e.css({width:a}):e.css({width:""}),e.children().each(function(){var e=$(this).data("ad-draggable-temp-width");e?$(this).css({width:e}):$(this).css({width:""})})}function g(e,a){var t=i.useClonedElement?M:l;t.css({left:e,top:a,position:"fixed","z-index":99999})}function c(e,a){a.el===l&&a.callback&&a.callback(e)}function d(e,a){a.el===l&&a.callback&&a.callback(e)}function p(e){if(i.onDragStartCallback){var a=i.useClonedElement?M:l;i.$apply(function(){i.onDragStartCallback(i,{$data:i.data,$dragElement:{el:a},$event:e})})}}function u(e){if(i.onDragEndCallback){var a=i.useClonedElement?M:l;o(function(){i.$apply(function(){i.onDragEndCallback(i,{$data:i.data,$dragElement:{el:a},$event:e})})},100)}}function f(e){var a,n;if(R){e.preventDefault(),a=e.pageX||e.originalEvent.touches[0].pageX,n=e.pageY||e.originalEvent.touches[0].pageY,L=a-I+x.left-K.scrollLeft(),k=n-E+x.top-K.scrollTop(),a-=K.scrollLeft(),n-=K.scrollTop(),g(L,k);var o=i.useClonedElement?M:l;t.$broadcast("draggable:move",{x:I,y:E,tx:L,ty:k,cx:a,cy:n,el:o,data:i.data})}}function m(e){if(R){e.preventDefault();var a=i.useClonedElement?M:l;t.$broadcast("draggable:end",{x:I,y:E,tx:L,ty:k,el:a,data:i.data,callback:u}),i.useClonedElement?(l.removeClass("ad-dragging"),a.remove()):a.removeClass("ad-dragging"),s(),j.off(N,f),j.off(T,m)}}function C(e){R=i.$eval(e)}function v(e){i.data=e}function h(e,a){var t,n=$(a).attr("style");return n&&n.split(";").forEach(function(a){var n=a.split(":");$.trim(n[0])===e&&(t=n[1])}),t}function b(){var e=i.useClonedElement?M:l;h("width",e)&&e.data("ad-draggable-temp-width",h("width",e)),e.width(e.width()),e.children().each(function(){h("width",this)&&$(this).data("ad-draggable-temp-width",h("width",this)),$(this).width($(this).width())})}function S(e){if(R){e.preventDefault(),i.useClonedElement&&(M=l.clone().appendTo(l.parent()),M.css({position:"fixed"}));var a=i.useClonedElement?M:l;x=l.offset(),x=i.hasHandle?l.find(".ad-drag-handle").offset():l.offset(),l.addClass("ad-dragging"),I=e.pageX||e.originalEvent.touches[0].pageX,E=e.pageY||e.originalEvent.touches[0].pageY,L=x.left-K.scrollLeft(),k=x.top-K.scrollTop(),b(),g(L,k),j.on(N,f),j.on(T,m),t.$broadcast("draggable:start",{x:I,y:E,tx:L,ty:k,el:a,data:i.data,callback:p})}}function D(){clearTimeout(q),j.off(N,D),j.off(T,D)}function P(e){return R&&!($(e.target).is("[ad-prevent-drag]")||$(e.target).parents("[ad-prevent-drag]").length>0)?z?(D(),q=setTimeout(function(){D(),S(e)},100),j.on(N,D),j.on(T,D),void 0):(S(e),!1):void 0}function y(e){e&&(i.$on("$destroy",function(){y(!1)}),r.$observe("adDrag",C),i.$watch(r.adDragData,v),i.$on("draggable:start",c),i.$on("draggable:end",d),i.hasHandle?l.on(A,".ad-drag-handle",P):(l.on(A,P),l.addClass("ad-draggable")))}function w(){l.attr("draggable","false"),y(!0)}i.draggable=r.adDrag,i.hasHandle="false"===r.adDragHandle||"undefined"==typeof r.adDragHandle?!1:!0,i.onDragStartCallback=n(r.adDragBegin)||null,i.onDragEndCallback=n(r.adDragEnd)||null,i.useClonedElement="true"===r.adDragCloneElement,i.data=null;var x,I,E,L,k,z="ontouchstart"in a.documentElement,A="touchstart mousedown",N="touchmove mousemove",T="touchend mouseup",j=$(a),K=$(e),R=!1,q=null,M=null;w()}return{restrict:"A",link:i}}]).directive("adDrop",["$rootScope","$parse",function(a,t){function n(n,o,i){function l(e,a){var t=o.offset(),n=Math.floor(o.outerHeight()/6);return e+=C.scrollLeft(),a+=C.scrollTop(),a>=t.top+n&&a<=t.top+o.outerHeight()-n&&e>=t.left&&e<=t.left+o.outerWidth()&&e>=t.left&&e<=t.left+o.outerWidth()?o:null}function r(e){u=n.$eval(e)}function s(e,a){f!==a.el&&(f=null)}function g(e,t){if(u&&o!==t.el){var i=l(t.cx,t.cy);null!==i?(f=i,m=f,t.el.lastDropElement=f,n.$apply(function(){n.onDropOverCallback(n,{$data:t.data,$dragElement:{el:t.el},$dropElement:{el:f},$event:e})}),o.addClass("ad-drop-over"),a.$broadcast("draggable:change",{el:f})):t.el.lastDropElement===o&&(n.$apply(function(){n.onDropLeaveCallback(n,{$data:t.data,$dragElement:{el:t.el},$dropElement:{el:t.el.lastDropElement},$event:e})}),t.el.lastDropElement.removeClass("ad-drop-over"),delete t.el.lastDropElement)}}function c(e,a){u&&(f&&n.$apply(function(){n.onDropCallback(n,{$data:a.data,$dragElement:{el:a.el},$dropElement:{el:f},$lastDropElement:{el:m},$event:e})}),f=null,m=null)}function d(e){e&&(i.$observe("adDrop",r),n.$on("$destroy",function(){d(!1)}),n.$on("draggable:move",g),n.$on("draggable:end",c),n.$on("draggable:change",s))}function p(){d(!0)}n.droppable=i.adDrop,n.onDropCallback=t(i.adDropEnd)||null,n.onDropOverCallback=t(i.adDropOver)||null,n.onDropLeaveCallback=t(i.adDropLeave)||null;var u=!1,f=null,m=null,C=$(e);p()}return{restrict:"A",link:n}}]),angular.module("adaptv.adaptStrap.infinitedropdown",["adaptv.adaptStrap.utils","adaptv.adaptStrap.loadingindicator"]).directive("adInfiniteDropdown",["$parse","$compile","$timeout","$templateCache","$adConfig","adLoadPage","adDebounce","adStrapUtils","adLoadLocalPage",function(e,n,o,i,l,r,s,g,c){function d(n,i,l){n.attrs=l,n.adStrapUtils=g,n.onDataLoadedCallback=e(l.onDataLoaded)||null,n.items={list:[],paging:{currentPage:1,totalPages:t,pageSize:Number(l.pageSize)||10}},n.localConfig={loadingData:!1,singleSelectionMode:e(l.singleSelectionMode)()?!0:!1,dimensions:{"max-height":l.maxHeight||"200px","max-width":l.maxWidth||"auto"}},n.selectedItems=n.$eval(l.selectedItems)||[],n.ajaxConfig=n.$eval(l.ajaxConfig)||{};var d,p=[];n.addRemoveItem=function(e,a,t){e.stopPropagation(),n.localConfig.singleSelectionMode?n.selectedItems[0]=a:g.addRemoveItemFromList(a,t);var o=n.$eval(l.onItemClick);o&&o(a),n.localConfig.singleSelectionMode&&(n.dropdownStatus.open=!1,i.find(".dropdown").removeClass("open"))},n.loadPage=s(function(e){d=Math.random(),n.localConfig.loadingData=!0;var a=n.$eval(l.pageLoader)||r,t={pageNumber:e,pageSize:n.items.paging.pageSize,sortKey:n.localConfig.predicate,sortDirection:n.localConfig.reverse,ajaxConfig:n.ajaxConfig,token:d},o=function(a){a.token===d&&(1===e?n.items.list=a.items:n.items.list=n.items.list.concat(a.items),n.items.paging.totalPages=a.totalPages,n.items.paging.currentPage=a.currentPage,n.localConfig.loadingData=!1,l.onDataLoaded&&n.onDataLoadedCallback(n,{$success:!0,$response:a}))},i=function(){n.localConfig.loadingData=!1,l.onDataLoaded&&n.onDataLoadedCallback(n,{$success:!1,$response:null})};l.localDataSource?(t.localData=n.$eval(l.localDataSource),o(c(t))):a(t).then(o,i)},10),n.loadNextPage=function(){n.localConfig.loadingData||n.items.paging.currentPage+1<=n.items.paging.totalPages&&n.loadPage(n.items.paging.currentPage+1)},n.dropdownHeaderAreaClicked=function(e){e.stopPropagation()},n.loadPage(1),l.ajaxConfig&&n.$watch(l.ajaxConfig,function(e){e&&n.loadPage(1)},!0),l.localDataSource&&(p.push(n.$watch(l.localDataSource,function(e){e&&n.loadPage(1)})),p.push(n.$watch(l.localDataSource+".length",function(e){e&&n.loadPage(1)}))),n.dropdownStatus=n.$eval(l.dropdownStatus)||{open:!1},p.push(n.$watch("dropdownStatus.open",function(e){e===!0?o(function(){i.find(".dropdown").addClass("open")},0):o(function(){i.find(".dropdown").removeClass("open")},0)})),i.find(".dropdown-toggle").click(function(){n.$apply(function(){n.dropdownStatus.open?n.dropdownStatus.open=!1:(n.dropdownStatus.open=!0,i.find(".dropdown-header").outerWidth(i.find(".dropdown-menu").outerWidth()))})}),$(a).click(function(){n.$apply(function(){n.dropdownStatus.open&&(n.dropdownStatus.open=!1)})}),n.$on("$destroy",function(){p.forEach(function(e){e()})});var u=angular.element(i).find("ul")[0],f=s(function(){u.scrollTop+u.offsetHeight>=u.scrollHeight-300&&n.loadNextPage()},50);angular.element(u).bind("mousewheel DOMMouseScroll scroll",function(e){console.log("scrolling"),e.originalEvent&&e.originalEvent.deltaY&&(u.scrollTop+=e.originalEvent.deltaY,e.preventDefault(),e.stopPropagation()),f()})}return{restrict:"E",scope:!0,link:d,templateUrl:"infinitedropdown/infinitedropdown.tpl.html"}}]),angular.module("adaptv.adaptStrap.loadingindicator",[]).directive("adLoadingIcon",["$adConfig","$compile",function(e,a){return{restrict:"E",compile:function(){return{pre:function(t,n,o){var i=o.loadingIconClass||e.iconClasses.loadingSpinner,l=o.loadingIconSize?"ng-style=\"{'font-size': '"+o.loadingIconSize+"'}\"":"",r='<i class="'+i+'" '+l+"></i>";n.empty(),n.append(a(r)(t))}}}}}]).directive("adLoadingOverlay",["$adConfig",function(e){return{restrict:"E",templateUrl:"loadingindicator/loadingindicator.tpl.html",scope:{loading:"=",zIndex:"@",position:"@",containerClasses:"@",loadingIconClass:"@",loadingIconSize:"@"},compile:function(){return{pre:function(a){a.loadingIconClass=a.loadingIconClass||e.iconClasses.loading,a.loadingIconSize=a.loadingIconSize||"3em"}}}}}]),angular.module("adaptv.adaptStrap.tableajax",["adaptv.adaptStrap.utils","adaptv.adaptStrap.loadingindicator"]).directive("adTableAjax",["$parse","$filter","$adConfig","adLoadPage","adDebounce","adStrapUtils",function(e,a,n,o,i,l){function r(r,s){r.attrs=s,r.attrs.state=r.attrs.state||{},r.iconClasses=n.iconClasses,r.adStrapUtils=l,r.tableClasses=n.componentClasses.tableAjaxClass,r.onDataLoadedCallback=e(s.onDataLoaded)||null,r.items={list:t,allItems:t,paging:{currentPage:1,totalPages:t,totalItems:t,pageSize:Number(s.pageSize)||n.paging.pageSize,pageSizes:e(s.pageSizes)()||n.paging.pageSizes}},r.localConfig={pagingArray:[],loadingData:!1,showNoDataFoundMessage:!1,tableMaxHeight:s.tableMaxHeight,expandedItems:[],sortState:{},stateChange:r.$eval(s.onStateChange)},r.selectedItems=r.$eval(s.selectedItems),r.onRowClick=function(e,a){var t=r.$parent.$eval(s.onRowClick);t&&t(e,a)},r.ajaxConfig=r.$eval(s.ajaxConfig),r.columnDefinition=r.$eval(s.columnDefinition),r.visibleColumnDefinition=a("filter")(r.columnDefinition,r.columnVisible);var g,c=[];!r.items.paging.pageSize&&r.items.paging.pageSizes[0]&&(r.items.paging.pageSize=r.items.paging.pageSizes[0]),r.loadPage=i(function(e){r.collapseAll(),g=Math.random(),r.localConfig.loadingData=!0,r.localConfig.showNoDataFoundMessage=!1;var a=r.$eval(s.pageLoader)||o,t={pageNumber:e,pageSize:r.items.paging.pageSize,sortKey:r.localConfig.sortState.sortKey,sortDirection:"DEC"===r.localConfig.sortState.sortDirection,ajaxConfig:r.ajaxConfig,token:g},n=function(e){e.token===g&&(r.items.list=e.items,r.items.allItems=e.items,r.items.paging.totalPages=e.totalPages,r.items.paging.totalItems=e.totalItems,r.items.paging.currentPage=e.currentPage,r.localConfig.pagingArray=e.pagingArray,r.localConfig.loadingData=!1),e.totalPages||(r.localConfig.showNoDataFoundMessage=!0),r.onDataLoadedCallback&&r.onDataLoadedCallback(r,{$success:!0,$response:e})},i=function(){r.localConfig.loadingData=!1,r.localConfig.showNoDataFoundMessage=!0,r.onDataLoadedCallback&&r.onDataLoadedCallback(r,{$success:!1,$response:null})};a(t).then(n,i)}),r.loadNextPage=function(){r.localConfig.loadingData||r.items.paging.currentPage+1<=r.items.paging.totalPages&&r.loadPage(r.items.paging.currentPage+1)},r.loadPreviousPage=function(){r.localConfig.loadingData||r.items.paging.currentPage-1>0&&r.loadPage(r.items.paging.currentPage-1)},r.loadLastPage=function(){r.localConfig.loadingData||r.items.paging.currentPage!==r.items.paging.totalPages&&r.loadPage(r.items.paging.totalPages)},r.pageSizeChanged=function(e){Number(e)!==r.items.paging.pageSize&&(r.items.paging.pageSize=Number(e),r.loadPage(1))},r.columnVisible=function(e){return e.visible!==!1},r.sortByColumn=function(e,a){var t=r.localConfig.sortState.sortDirection||"ASC";e.sortKey&&(e.sortKey!==r.localConfig.sortState.sortKey?r.localConfig.sortState={sortKey:e.sortKey,sortDirection:e.sortDirection?e.sortDirection:t}:r.localConfig.sortState.sortDirection===t?r.localConfig.sortState.sortDirection="ASC"===t?"DEC":"ASC":r.localConfig.sortState={},r.loadPage(r.items.paging.currentPage),!a&&r.localConfig.stateChange&&r.localConfig.stateChange(r.localConfig.sortState))},r.collapseAll=function(){r.localConfig.expandedItems.length=0},r.expandCollapseRow=function(e){l.addRemoveItemFromList(e,r.localConfig.expandedItems)},r.getRowClass=function(e,a){var t="";return t+=s.selectedItems&&l.itemExistsInList(e,r.selectedItems)?"ad-selected":"",t+=l.itemExistsInList(a,r.localConfig.expandedItems)?" row-expanded":"",s.rowClassProvider&&(t+=" "+r.$eval(s.rowClassProvider)(e,a)),t},r.toggle=function(e,a,t){if(e.stopPropagation(),l.addRemoveItemFromList(a,r.localConfig.expandedItems),l.itemExistsInList(a,r.localConfig.expandedItems)){var n=r.$eval(s.rowExpandCallback);n&&n(t)}};var d=r.$eval(s.state)||{},p={sortKey:d.sortKey,sortDirection:d.sortDirection};r.sortByColumn(p,!0),r.loadPage(1),r.$on("adTableAjaxAction",function(e,a){var t={expandCollapseRow:r.expandCollapseRow};a.tableName===r.attrs.tableName&&a.action(t)}),c.push(r.$watch(s.ajaxConfig,function(){r.loadPage(1)},!0)),c.push(r.$watchCollection(s.columnDefinition,function(){r.columnDefinition=r.$eval(s.columnDefinition),r.visibleColumnDefinition=a("filter")(r.columnDefinition,r.columnVisible)})),r.$on("$destroy",function(){c.forEach(function(e){e()})})}return{restrict:"E",scope:!0,templateUrl:"tableajax/tableajax.tpl.html",controller:["$scope","$attrs",r]}}]),angular.module("adaptv.adaptStrap.tablelite",["adaptv.adaptStrap.utils"]).directive("adTableLite",["$parse","$http","$compile","$filter","$templateCache","$adConfig","adStrapUtils","adDebounce","adLoadLocalPage",function(e,a,n,o,i,l,r,s,g){function c(a,n){function i(e,a,t){a.next()[0]===e[0]?a.before(e):a.prev()[0]===e[0]?a.after(e):a.next()[0]===t[0]?a.before(e):a.prev()[0]===t[0]&&a.after(e)}a.attrs=n,a.attrs.state=a.attrs.state||{},a.iconClasses=l.iconClasses,a.adStrapUtils=r,a.tableClasses=l.componentClasses.tableLiteClass,a.columnDefinition=a.$eval(n.columnDefinition),a.visibleColumnDefinition=o("filter")(a.columnDefinition,a.columnVisible),a.items={list:t,allItems:t,paging:{currentPage:1,totalPages:t,pageSize:Number(n.pageSize)||l.paging.pageSize,pageSizes:e(n.pageSizes)()||l.paging.pageSizes}},a.filters={},a.localConfig={localData:r.parse(a.$eval(n.localDataSource)),pagingArray:[],dragChange:a.$eval(n.onDragChange),expandedItems:[],sortState:{},stateChange:a.$eval(n.onStateChange),draggable:a.$eval(n.draggable)||!1},a.selectedItems=a.$eval(n.selectedItems),a.searchText=a.$eval(n.searchText);var c,d=null,p=!1,u=null,f=!1,m=[];!a.items.paging.pageSize&&a.items.paging.pageSizes[0]&&(a.items.paging.pageSize=a.items.paging.pageSizes[0]),a.loadPage=s(function(e){a.collapseAll();var t,i,l=r.parse(a.$eval(n.localDataSource)),s={};a.localConfig.localData=a.searchText?o("filter")(l,a.searchText):l,n.enableColumnSearch&&r.hasAtLeastOnePropertyWithValue(a.filters)&&(angular.forEach(a.filters,function(e,a){a.indexOf(".")>-1?angular.extend(s,r.createdChainObjectAndInitValue(a,e)):s[a]=e}),a.localConfig.localData=o("filter")(a.localConfig.localData,s)),t=a.localConfig.localData,i={pageNumber:e,pageSize:n.disablePaging?t.length:a.items.paging.pageSize,sortKey:a.localConfig.sortState.sortKey,sortDirection:"DEC"===a.localConfig.sortState.sortDirection,localData:t,draggable:a.localConfig.draggable};var c=g(i);return a.items.list=c.items,a.items.allItems=c.allItems,a.items.paging.currentPage=c.currentPage,a.items.paging.totalPages=c.totalPages,a.localConfig.pagingArray=c.pagingArray,0===c.items.length?void a.loadPreviousPage():void a.$emit("adTableLite:pageChanged",a.items.paging)},100),a.loadNextPage=function(){a.items.paging.currentPage+1<=a.items.paging.totalPages&&a.loadPage(a.items.paging.currentPage+1)},a.loadPreviousPage=function(){a.items.paging.currentPage-1>0&&a.loadPage(a.items.paging.currentPage-1)},a.loadLastPage=function(){a.localConfig.disablePaging||a.loadPage(a.items.paging.totalPages)},a.pageSizeChanged=function(e){a.items.paging.pageSize=e,a.loadPage(1)},a.columnVisible=function(e){return e.visible!==!1},a.sortByColumn=function(e,t){var n=a.localConfig.sortState.sortDirection||"ASC";e.sortKey&&(e.sortKey!==a.localConfig.sortState.sortKey?a.localConfig.sortState={sortKey:e.sortKey,sortDirection:e.sortDirection?e.sortDirection:n}:a.localConfig.sortState.sortDirection===n?a.localConfig.sortState.sortDirection="ASC"===n?"DEC":"ASC":a.localConfig.sortState={},a.loadPage(a.items.paging.currentPage),!t&&a.localConfig.stateChange&&a.localConfig.stateChange(a.localConfig.sortState))},a.unSortTable=function(){a.localConfig.sortState={}},a.collapseAll=function(){a.localConfig.expandedItems.length=0},a.expandCollapseRow=function(e){r.addRemoveItemFromList(e,a.localConfig.expandedItems)},a.onDragStart=function(e,t){a.localConfig.expandedItems.length=0,t=t.el;var n=t.parent();d=$('<tr id="row-phldr"><td colspan='+t.find("td").length+">&nbsp;</td></tr>"),c=t.index()+(a.items.paging.currentPage-1)*a.items.paging.pageSize,p||(t[0]!==n.children().last()[0]?(t.next().before(d),p=!0):(n.append(d),p=!0))},a.onDragEnd=function(){$("#row-phldr").remove(),p=!1},a.onDragOver=function(e,a,t){d&&i(d,t.el,a.el)},a.onDropEnd=function(e,t){var n;t=t.el,d&&(d.next()[0]?d.next().before(t):d.prev()[0]&&d.prev().after(t),$("#row-phldr").remove(),p=!1,f=!0,n=t.index()+(a.items.paging.currentPage-1)*a.items.paging.pageSize,r.moveItemInList(c,n,a.localConfig.localData),a.localConfig.draggable&&a.localConfig.dragChange&&a.localConfig.dragChange(c,n,e),a.unSortTable(),a.loadPage(a.items.paging.currentPage))},a.onPageButtonOver=function(e,a,t){"disabled"!==t.el.attr("disabled")&&(u=t.el,u.parent().addClass("active"))},a.onPageButtonLeave=function(e,a,t){u&&u===t.el&&(u.parent().removeClass("active"),u=null)},a.onPageButtonDrop=function(e,t){var n;u&&(f=!0,"btnPrev"===u.attr("id")&&(n=a.items.paging.pageSize*(a.items.paging.currentPage-1)-1),"btnNext"===u.attr("id")&&(n=a.items.paging.pageSize*a.items.paging.currentPage),r.moveItemInList(c,n,a.localConfig.localData),a.loadPage(a.items.paging.currentPage),$("#row-phldr").remove(),p=!1,t.el.remove(),a.localConfig.draggable&&a.localConfig.dragChange&&a.localConfig.dragChange(c,n,e),u.parent().removeClass("active"),u=null)},a.getRowClass=function(e,t){var o="";return o+=n.selectedItems&&r.itemExistsInList(e,a.selectedItems)?"ad-selected":"",o+=r.itemExistsInList(t,a.localConfig.expandedItems)?" row-expanded":"",n.rowClassProvider&&(o+=" "+a.$eval(n.rowClassProvider)(e,t)),o},a.toggle=function(e,t,o){if(e.stopPropagation(),r.addRemoveItemFromList(t,a.localConfig.expandedItems),r.itemExistsInList(t,a.localConfig.expandedItems)){var i=a.$eval(n.rowExpandCallback);i&&i(o)}},a.onRowClick=function(e,t){var o=a.$parent.$eval(n.onRowClick);o&&o(e,t)};var C=a.$eval(n.state)||{},v={sortKey:C.sortKey,sortDirection:C.sortDirection};if(a.sortByColumn(v,!0),a.loadPage(1),a.$on("adTableLiteAction",function(e,t){var n={expandCollapseRow:a.expandCollapseRow};t.tableName===a.attrs.tableName&&t.action(n)}),m.push(a.$watch(n.localDataSource,function(){a.loadPage(a.items.paging.currentPage)})),m.push(a.$watch(n.localDataSource+".length",function(){a.loadPage(a.items.paging.currentPage)})),m.push(a.$watchCollection(n.columnDefinition,function(){a.columnDefinition=a.$eval(n.columnDefinition),a.visibleColumnDefinition=o("filter")(a.columnDefinition,a.columnVisible)})),m.push(a.$watch(n.searchText,function(){a.searchText=a.$eval(n.searchText),a.loadPage(1)})),n.enableColumnSearch){var h=s(function(){a.loadPage(1)},Number(n.columnSearchDebounce)||400);m.push(a.$watch("filters",function(){h()},!0))}a.$on("$destroy",function(){m.forEach(function(e){e()})})}return{restrict:"E",controller:["$scope","$attrs",c],templateUrl:"tablelite/tablelite.tpl.html",scope:!0}}]),angular.module("adaptv.adaptStrap.treebrowser",[]).directive("adTreeBrowser",["$adConfig",function(e){function a(a,t){var n=Math.random();a.attrs=t,a.iconClasses=e.iconClasses,a.treeRoot=a.$eval(t.treeRoot)||{},a.toggle=function(e,n){var o;e.stopPropagation(),o=a.$eval(t.toggleCallback),o?o(n):n._ad_expanded=!n._ad_expanded},a.onRowClick=function(e,n,o){var i=a.$parent.$eval(t.onRowClick);i&&i(e,n,o)};var o=a.$eval(t.hasChildren);a.hasChildren=function(e){var a=e[t.childNode]&&e[t.childNode].length>0;return o&&(a=o(e)),a},a.localConfig={rendererTemplateId:"tree-renderer-"+n+".html"}}return{restrict:"E",scope:!0,controller:["$scope","$attrs",a],templateUrl:"treebrowser/treebrowser.tpl.html"}}]).directive("adTreeBrowserNode",["$compile","$http","$templateCache",function(e,a,t){function n(a){var t=a.config.url,n=l[t];if(!n){var o=i.replace(/%=nodeTemplate%/g,a.data);l[t]=e(o)}return l[t]}function o(e,o,i){function l(a){n(a)(e,function(e){o.append(e)})}a({cache:t,url:e.$eval(i.templateUrl),method:"GET"}).then(l)}var i=t.get("treebrowser/treeBrowserNode.tpl.html"),l={};return{link:o,scope:!0,restrict:"E"}}]).directive("adTreeBrowserNodeToggle",function(){return{scope:!0,restrict:"E",replace:!0,templateUrl:"treebrowser/treebrowserNodeToggle.tpl.html"}}),angular.module("adaptv.adaptStrap.utils",[]).factory("adStrapUtils",["$filter",function(e){var a=function(e,a){var t=a.split(".");if(e)for(;t.length;){var n=t.shift();e&&(e=e[n])}return e},t=function(e,a){for(var t=e.split("."),n={obj:{}},o=n.obj;t.length;){var i=t.shift();o&&(0===t.length?o[i]=a:(o[i]={},o=o[i]))}return n.obj},n=function(a,t,n){var o,i,l;return a&&"function"==typeof a?a(n):(t&&(l=t.indexOf(":"),l>-1?(o=t.substring(0,l),i=t.substring(l+1),a=e(o)(a,i)):a=e(t)(a)),a)},o=function(e,a){var t=!1;return a.forEach(function(a){angular.equals(e,a)&&(t=!0)}),t},i=function(e,a){var t,n=!0;for(t=0;t<e.length;t++)if(o(e[t],a)===!1){n=!1;break}return n},l=function(e,a){a.push(e)},r=function(e,a){var t;for(t=a.length-1;t>-1;t--)angular.equals(e,a[t])&&a.splice(t,1)},s=function(e,a){var t,n=!1;for(t=a.length-1;t>-1;t--)angular.equals(e,a[t])&&(a.splice(t,1),n=!0);n===!1&&a.push(e)},g=function(e,a){e.forEach(function(e){o(e,a)||s(e,a)})},c=function(e,a){i(e,a)?a.length=0:g(e,a)},d=function(e,a,t){a<t.length&&t.splice(a,0,t.splice(e,1)[0])},p=function(e){var a=[];return angular.isArray(e)?a=e:angular.forEach(e,function(e){a.push(e)}),a},u=function(e,a){if(a&&"function"==typeof a)return a(e);for(var t=a.split(".");t.length;)e=e[t.shift()];return e},f=function(e){var a,t,n=!1;for(a in e)if(t=e[a],t instanceof Array?t.length>0&&(n=!0):t&&(n=!0),n)break;return n};return{evalObjectProperty:a,createdChainObjectAndInitValue:t,applyFilter:n,itemExistsInList:o,itemsExistInList:i,addItemToList:l,removeItemFromList:r,addRemoveItemFromList:s,addItemsToList:g,addRemoveItemsFromList:c,moveItemInList:d,parse:p,getObjectProperty:u,hasAtLeastOnePropertyWithValue:f}}]).factory("adDebounce",["$timeout","$q",function(e,a){var t=function(t,n,o,i){var l=null,r=a.defer(),s=n||300;return function(){var n=i||this,g=arguments,c=o&&!l,d=function(){o||(r.resolve(t.apply(n,g)),r=a.defer())};return l&&e.cancel(l),l=e(d,s),c&&(r.resolve(t.apply(n,g)),r=a.defer()),r.promise}};return t}]).directive("adCompileTemplate",["$compile",function(e){return function(a,t,n){a.$watch(function(e){return e.$eval(n.adCompileTemplate)},function(n){t.html(n),e(t.contents())(a)})}}]).factory("adLoadPage",["$adConfig","$http","adStrapUtils",function(e,a,t){return function(n){var o=(n.pageNumber-1)*n.pageSize,i=angular.copy(e.paging),l=angular.copy(n.ajaxConfig);l.paginationConfig&&l.paginationConfig.request&&angular.extend(i.request,l.paginationConfig.request),l.paginationConfig&&l.paginationConfig.response&&angular.extend(i.response,l.paginationConfig.response),l.params=l.params?l.params:{},i.request.start&&(l.params[i.request.start]=o),i.request.pageSize&&(l.params[i.request.pageSize]=n.pageSize),i.request.page&&(l.params[i.request.page]=n.pageNumber),n.sortKey&&i.request.sortField&&(l.params[i.request.sortField]=n.sortKey),n.sortDirection===!1&&i.request.sortDirection?l.params[i.request.sortDirection]=i.request.sortAscValue:n.sortDirection===!0&&i.request.sortDirection&&(l.params[i.request.sortDirection]=i.request.sortDescValue);var r;return r="JSONP"===l.method?a.jsonp(l.url+"?callback=JSON_CALLBACK",l):a(l),r.then(function(e){for(var a={items:t.evalObjectProperty(e.data,i.response.itemsLocation),currentPage:n.pageNumber,totalPages:Math.ceil(t.evalObjectProperty(e.data,i.response.totalItems)/n.pageSize),totalItems:Math.ceil(t.evalObjectProperty(e.data,i.response.totalItems)),pagingArray:[],token:n.token},o=5,l=n.pageNumber-Math.floor(o/2),r=l;r<=n.pageNumber;r++)r>0&&a.pagingArray.push(r);for(;a.pagingArray.length<o&&!(r>a.totalPages);)a.pagingArray.push(r),r++;return a})}}]).factory("adLoadLocalPage",["$filter",function(e){return function(a){var n={items:t,currentPage:a.pageNumber,totalPages:t,pagingArray:[],token:a.token};if(angular.isDefined(a.localData)){var o,i=(a.pageNumber-1)*a.pageSize,l=i+a.pageSize,r=a.localData,s=r;a.sortKey&&!a.draggable&&(s=e("orderBy")(r,a.sortKey,a.sortDirection)),n.items=s.slice(i,l),n.allItems=r,n.currentPage=a.pageNumber,n.totalPages=Math.ceil(r.length/a.pageSize);var g=5,c=a.pageNumber-Math.floor(g/2);for(o=c;o<=a.pageNumber;o++)o>0&&n.pagingArray.push(o);for(;n.pagingArray.length<g&&!(o>n.totalPages);)n.pagingArray.push(o),o++}return n}}])}(window,document);